@model IEnumerable<Ticket>
@{
    Layout = "_Layout";    
}




<div class="container-fluid myContainer">
    <div class="div-contenet-table overflow-auto">
        <table class="table shadow p-3 mb-5 rounded" id="myTable">
            <thead>
                <tr>                    
                    <th></th>
                    <th class="text-center">Имя клиента</th>
                    <th class="text-center">Фамилия клиента</th>
                    <th class="text-center">Имя работника</th>
                    <th class="text-center">Фамилия работника</th>
                    <th class="text-center">Поезд-Вагон-Место</th>
                    <th class="text-center">Стоимость билета</th>
                </tr>
            </thead>            
            <tbody id="editClickbody">
                
                @foreach (var el in Model)
                {                    
                    <tr class="rowEditStart">
                        <th class="d-flex justify-content-between">
                            @{
                                if(User.IsInRole("Администратор"))
                                {
                                    <a asp-action="Delete" asp-controller="Ticket" asp-route-id="@el.Id"><i class="bi bi-trash"></i></a>
                                }
                                else if(AuthorizedUser.GetInstance().GetWorker()?.Id == el.WorkerId)
                                {
                                    <a asp-action="Delete" asp-controller="Ticket" asp-route-id="@el.Id"><i class="bi bi-trash"></i></a>
                                }
                                else
                                {
                                    <br />  
                                }
                            }
                        </th>   
                        <td class="text-center">
                            @el.Client?.FirstName
                        </td>
                        <td class="text-center">
                             @el.Client?.LastName
                        </td>
                        <td class="text-center">
                             @el.Worker?.FirstName
                        </td>
                        <td class="text-center">
                             @el.Worker?.LastName
                        </td>  
                        <td class="text-center">
                             @el.TrainVanSit?.GetInfo()
                        </td>  
                        <td class="text-center">
                             @el.AllPrice
                        </td>    
                    </tr>
                }              
                
            </tbody>
        </table>

    </div>
</div>

